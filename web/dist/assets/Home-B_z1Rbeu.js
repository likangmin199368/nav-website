var K=Object.defineProperty;var G=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable;var R=(h,s,o)=>s in h?K(h,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):h[s]=o,L=(h,s)=>{for(var o in s||(s={}))P.call(s,o)&&R(h,o,s[o]);if(G)for(var o of G(s))Q.call(s,o)&&R(h,o,s[o]);return h};var T=(h,s,o)=>new Promise((u,f)=>{var g=p=>{try{m(o.next(p))}catch($){f($)}},d=p=>{try{m(o.throw(p))}catch($){f($)}},m=p=>p.done?u(p.value):Promise.resolve(p.value).then(g,d);m((o=o.apply(h,s)).next())});import{_ as W,r as b,c as r,F as C,a as I,o as c,b as l,d as x,t as S,n as B,w as O,e as H,f as X,g as Y,h as Z,i as V,j as ee,v as te,k as ne,l as q,m as le}from"./index-DECnA1Y4.js";import{g as oe,a as ae,b as se,c as ie,d as re,e as ce}from"./api-CPdfUet4.js";const ue={class:"menu-bar"},de=["onMouseenter","onMouseleave"],ve=["onClick"],he=["onClick"],me={__name:"MenuBar",props:{menus:Array,activeId:Number,activeSubMenuId:Number},setup(h){const s=b(null);function o(f){s.value=f}function u(f){setTimeout(()=>{s.value===f&&(s.value=null)},100)}return(f,g)=>(c(),r("nav",ue,[(c(!0),r(C,null,I(h.menus,d=>(c(),r("div",{key:d.id,class:"menu-item",onMouseenter:m=>o(d.id),onMouseleave:m=>u(d.id)},[l("button",{onClick:m=>f.$emit("select",d),class:B({active:d.id===h.activeId})},S(d.name),11,ve),d.subMenus&&d.subMenus.length>0?(c(),r("div",{key:0,class:B(["sub-menu",{show:s.value===d.id}])},[(c(!0),r(C,null,I(d.subMenus,m=>(c(),r("button",{key:m.id,onClick:p=>f.$emit("select",m,d),class:B([{active:m.id===h.activeSubMenuId},"sub-menu-item"])},S(m.name),11,he))),128))],2)):x("",!0)],40,de))),128))]))}},fe=W(me,[["__scopeId","data-v-16a94230"]]),ge=["href","title"],pe=["src","onError"],be={class:"link-text"},_e={__name:"CardGrid",props:{cards:Array},setup(h){const s=h,o=b(""),u=b("slideUp");O(()=>s.cards,(n,v)=>{n&&n.length>0&&(!v||v.length===0||JSON.stringify(n)!==JSON.stringify(v))&&X(()=>{f()})},{deep:!0,immediate:!1});function f(){const n=["slideUp","radial","fadeIn","slideLeft","slideRight","convergeIn","flipIn"],v=Math.floor(Math.random()*n.length);u.value=n[v],o.value=`animate-${u.value}`,setTimeout(()=>{o.value=""},1200)}function g(n){if(!o.value)return{};if(window.innerWidth<=480)return{animationDelay:"0s"};if(u.value==="slideUp")return{animationDelay:`${n*.05}s`};if(u.value==="radial"){const a=window.innerWidth<=768?3:window.innerWidth<=1200?4:6,_=Math.floor(n/a),y=n%a,k=Math.floor(a/2);return{animationDelay:`${(Math.abs(y-k)+_)*.08}s`}}else{if(u.value==="fadeIn")return{animationDelay:`${Math.random()*.5}s`};if(u.value==="slideLeft"){const a=window.innerWidth<=768?3:window.innerWidth<=1200?4:6;return{animationDelay:`${Math.floor(n/a)*.1}s`}}else if(u.value==="slideRight"){const a=window.innerWidth<=768?3:window.innerWidth<=1200?4:6,_=Math.floor(n/a),y=n%a;return{animationDelay:`${(_+(a-y-1)*.02)*.08}s`}}else if(u.value==="convergeIn"){const a=window.innerWidth<=768?3:window.innerWidth<=1200?4:6,_=n%a,y=Math.floor(a/2),k=Math.abs(_-y);return{animationDelay:`${(a-k-1)*.08}s`}}else if(u.value==="flipIn"){const a=window.innerWidth<=768?3:window.innerWidth<=1200?4:6,_=Math.floor(n/a),y=n%a;return{animationDelay:`${(_+y)*.06}s`}}}return{}}function d(n){if(n.custom_logo_path)return"http://localhost:3000/uploads/"+n.custom_logo_path;if(n.logo_url)return n.logo_url;try{return new URL(n.url).origin+"/favicon.ico"}catch(v){return"/default-favicon.png"}}function m(n,v){n.target.src="/default-favicon.png"}function p(n){let v="";return n.desc&&(v+=n.desc+`
`),v+=n.url,v}function $(n){return n?n.length>20?n.slice(0,20)+"...":n:""}return(n,v)=>(c(),r("div",{class:B(["container card-grid",o.value])},[(c(!0),r(C,null,I(h.cards,(a,_)=>(c(),r("div",{key:a.id,class:"link-item",style:H(g(_))},[l("a",{href:a.url,target:"_blank",title:p(a)},[l("img",{class:"link-icon",src:d(a),alt:"",onError:y=>m(y),loading:"lazy"},null,40,pe),l("span",be,S($(a.title)),1)],8,ge)],4))),128))],2))}},ye=W(_e,[["__scopeId","data-v-da4ab731"]]),we={class:"menu-bar-fixed"},ke={class:"search-section"},Me={class:"search-box-wrapper"},$e={class:"search-engine-select"},Ce=["onClick"],Ie={class:"search-container"},Se=["placeholder"],Te={key:0,class:"ad-space-fixed left-ad-fixed"},xe=["href"],Be=["src"],De={key:1,class:"ad-space-fixed right-ad-fixed"},Ee=["href"],Ue=["src"],Le={class:"footer"},We={class:"footer-content"},Ne={class:"modal-header"},Ae={class:"modal-body"},Fe={class:"friend-links-grid"},Ge=["href"],Re={class:"friend-link-logo"},Ve=["src","alt"],qe={key:1,class:"friend-link-placeholder"},ze={class:"friend-link-info"},z="url('https://main.ssss.nyc.mn/background.webp')",Oe={__name:"Home",setup(h){const s=b([]),o=b(null),u=b(null),f=b([]),g=b(""),d=b([]),m=b([]),p=b(!1),$=b([]),n=b(!1);let v=null;const a=b({bg_url_pc:"",bg_url_mobile:"",bg_opacity:"0.15",custom_css:""}),_=Y(()=>{const t=a.value.bg_url_pc,e=a.value.bg_url_mobile,w={"--dynamic-overlay-color":`rgba(0, 0, 0, ${1-parseFloat(a.value.bg_opacity)})`};return!t&&!e?w:t&&!e?(w["--dynamic-bg-pc"]=`url(${t})`,w["--dynamic-bg-mobile"]=z,w):!t&&e?(w["--dynamic-bg-pc"]=z,w["--dynamic-bg-mobile"]=`url(${e})`,w):(t&&e&&(w["--dynamic-bg-pc"]=`url(${t})`,w["--dynamic-bg-mobile"]=`url(${e})`),w)}),y=[{name:"google",label:"Google",placeholder:"Google 搜索...",url:t=>`https://www.google.com/search?q=${encodeURIComponent(t)}`},{name:"baidu",label:"百度",placeholder:"百度搜索...",url:t=>`https://www.baidu.com/s?wd=${encodeURIComponent(t)}`},{name:"bing",label:"Bing",placeholder:"Bing 搜索...",url:t=>`https://www.bing.com/search?q=${encodeURIComponent(t)}`},{name:"github",label:"github",placeholder:"GitHub 搜索...",url:t=>`https://github.com/search?q=${encodeURIComponent(t)}&type=repositories`},{name:"site",label:"站内",placeholder:"站内搜索...",url:t=>`/search?query=${encodeURIComponent(t)}`}],k=b(y[0]);function N(t){k.value=t}function D(){g.value="",n.value&&(n.value=!1,s.value.length?A(s.value[0]):f.value=[])}Z(()=>T(null,null,function*(){oe().then(t=>{a.value=L(L({},a.value),t.data)}).catch(t=>{console.error("加载网站设置失败:",t)}),ae().then(t=>{s.value=t.data,s.value.length&&(o.value=s.value[0],F())}),se().then(t=>{d.value=t.data.filter(e=>e.position==="left"),m.value=t.data.filter(e=>e.position==="right")}),ie().then(t=>{$.value=t.data})})),O(()=>a.value.custom_css,t=>{const e="custom-nav-style";let M=document.getElementById(e);M||(M=document.createElement("style"),M.id=e,document.head.appendChild(M)),M.textContent=t||""},{immediate:!0});function A(t,e=null){return T(this,null,function*(){g.value="",n.value=!1,e?(o.value=e,u.value=t):(o.value=t,u.value=null),F()})}function F(){return T(this,null,function*(){var e;if(!o.value)return;const t=yield re(o.value.id,(e=u.value)==null?void 0:e.id);f.value=t.data})}function j(){clearTimeout(v),k.value.name==="site"&&(v=setTimeout(()=>{g.value.trim()===""?D():E(!0)},300))}function E(t=!1){return T(this,null,function*(){if(clearTimeout(v),k.value.name==="site"){if(!g.value.trim()){D();return}try{const e=yield ce(g.value.trim());f.value=e.data,n.value=!0,o.value=null,u.value=null}catch(e){console.error("全局搜索失败:",e),t||alert("搜索失败，请稍后重试。")}}else{if(!g.value.trim())return;const e=k.value.url(g.value);window.open(e,"_blank")}})}function J(t){t.target.style.display="none",t.target.nextElementSibling.style.display="flex"}return(t,e)=>{var M,U;return c(),r("div",{class:"home-container",style:H(_.value)},[l("div",we,[V(fe,{menus:s.value,activeId:(M=o.value)==null?void 0:M.id,activeSubMenuId:(U=u.value)==null?void 0:U.id,onSelect:A},null,8,["menus","activeId","activeSubMenuId"])]),l("div",ke,[l("div",Me,[l("div",$e,[(c(),r(C,null,I(y,i=>l("button",{key:i.name,class:B(["engine-btn",{active:k.value.name===i.name}]),onClick:w=>N(i)},S(i.label),11,Ce)),64)),e[5]||(e[5]=l("a",{href:"/admin",target:"_blank",class:"engine-btn admin-btn"}," 后台 ",-1))]),l("div",Ie,[ee(l("input",{"onUpdate:modelValue":e[0]||(e[0]=i=>g.value=i),type:"text",placeholder:k.value.placeholder,class:"search-input",onKeyup:ne(E,["enter"]),onInput:j},null,40,Se),[[te,g.value]]),g.value?(c(),r("button",{key:0,class:"clear-btn",onClick:D,"aria-label":"清空",title:"clear"},e[6]||(e[6]=[l("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"white","stroke-width":"2"},[l("path",{d:"M18 6L6 18M6 6l12 12"})],-1)]))):x("",!0),l("button",{onClick:E,class:"search-btn",title:"search"},e[7]||(e[7]=[l("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none"},[l("path",{d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))])])]),d.value.length?(c(),r("div",Te,[(c(!0),r(C,null,I(d.value,i=>(c(),r("a",{key:i.id,href:i.url,target:"_blank"},[l("img",{src:i.img,alt:"广告"},null,8,Be)],8,xe))),128))])):x("",!0),m.value.length?(c(),r("div",De,[(c(!0),r(C,null,I(m.value,i=>(c(),r("a",{key:i.id,href:i.url,target:"_blank"},[l("img",{src:i.img,alt:"广告"},null,8,Ue)],8,Ee))),128))])):x("",!0),V(ye,{cards:f.value},null,8,["cards"]),l("footer",Le,[l("div",We,[l("button",{onClick:e[1]||(e[1]=i=>p.value=!0),class:"friend-link-btn"},e[8]||(e[8]=[l("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[l("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}),l("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"})],-1),q(" 友情链接 ")])),e[9]||(e[9]=l("p",{class:"copyright"},[q("Copyright © 2025 Nav-Item | "),l("a",{href:"https://github.com/eooce/Nav-Item",target:"_blank",class:"footer-link"},"Powered by eooce")],-1))])]),p.value?(c(),r("div",{key:2,class:"modal-overlay",onClick:e[4]||(e[4]=i=>p.value=!1)},[l("div",{class:"modal-content",onClick:e[3]||(e[3]=le(()=>{},["stop"]))},[l("div",Ne,[e[11]||(e[11]=l("h3",null,"友情链接",-1)),l("button",{onClick:e[2]||(e[2]=i=>p.value=!1),class:"close-btn"},e[10]||(e[10]=[l("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[l("path",{d:"M18 6L6 18M6 6l12 12"})],-1)]))]),l("div",Ae,[l("div",Fe,[(c(!0),r(C,null,I($.value,i=>(c(),r("a",{key:i.id,href:i.url,target:"_blank",class:"friend-link-card"},[l("div",Re,[i.logo?(c(),r("img",{key:0,src:i.logo,alt:i.title,onError:J},null,40,Ve)):(c(),r("div",qe,S(i.title.charAt(0)),1))]),l("div",ze,[l("h4",null,S(i.title),1)])],8,Ge))),128))])])])])):x("",!0)],4)}}},Ke=W(Oe,[["__scopeId","data-v-cce0a114"]]);export{Ke as default};
